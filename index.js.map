{"version":3,"file":"index.js","sources":["src/index.js"],"sourcesContent":["import _ from 'lodash';\n\nfunction __range__(left, right, inclusive) {\n  let range = [];\n  let ascending = left < right;\n  let end = !inclusive ? right : ascending ? right + 1 : right - 1;\n  for (let i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n    range.push(i);\n  }\n  return range;\n}\n\nconst pagination = angular\n  .module('$pagination', [])\n  .run([\n    '$templateCache',\n    e =>\n      e.put(\n        'directives/pagination.html',\n        '<div class=\"pagination\" ng-show=\"showPagination\"><ul><li class=\"prev previous_page\" ng-class=\"prevPageDisabled()\"><a ng-click=\"prevPage()\" rel=\"previous\" title=\"Previous\" href=\"javascript:\"><</a></li><li ng-class=\"setActive(n)\" ng-repeat=\"n in range()\"><a rel=\"start\" ng-click=\"setPage(n)\" href=\"javascript:\">{{n+1}}</a></li><li ng-class=\"nextPageDisabled()\"><a ng-click=\"nextPage()\" rel=\"next\" title=\"next\" href=\"javascript:\">></a></li></ul></div>'\n      ),\n  ])\n  .service('PaginationService', function() {\n    let itemsPerPage = 10;\n    let currentPage = 0;\n    let pageCount = 0;\n    return {\n      getCurrentPage() {\n        return currentPage;\n      },\n\n      getItemsPerPage() {\n        return itemsPerPage;\n      },\n\n      getPageCount() {\n        return pageCount;\n      },\n\n      nextPage() {\n        if (currentPage < pageCount) {\n          currentPage++;\n        }\n        return currentPage;\n      },\n\n      prevPage() {\n        if (currentPage > 0) {\n          currentPage--;\n        }\n        return currentPage;\n      },\n\n      setItemsPerPage(i) {\n        return (itemsPerPage = i);\n      },\n\n      setPage(i) {\n        return (currentPage = i);\n      },\n\n      setPageCount(itemCount) {\n        return (pageCount = Math.ceil(itemCount / itemsPerPage) - 1);\n      },\n\n      setRange() {\n        const nums = __range__(0, pageCount, true);\n        return nums;\n      },\n    };\n  })\n  .filter(\n    'itemsForCurrentPage',\n    PaginationService =>\n      function(data) {\n        if (_.isEmpty(data)) {\n          return data;\n        }\n\n        const offset = PaginationService.getItemsPerPage();\n        const current = PaginationService.getCurrentPage();\n\n        const start = current * offset;\n        const end = start + offset;\n        return data.slice(start, end);\n      }\n  )\n  .controller('PaginationCtrl', [\n    '$scope',\n    'PaginationService',\n    function($scope, PaginationService) {\n      $scope.showPagination = false;\n\n      if (!_.isUndefined($scope.itemsperpage) && !($scope.itemsperpage <= 0)) {\n        PaginationService.setItemsPerPage($scope.itemsperpage);\n      }\n\n      return $scope.$watch('totalitems', function(totalItems) {\n        if (!_.isUndefined(totalItems)) {\n          PaginationService.setPageCount(totalItems);\n          $scope.showPagination = PaginationService.getPageCount() > 0;\n\n          if (_.isFunction($scope.changed)) {\n            return $scope.changed(PaginationService.getCurrentPage(), PaginationService.getPageCount());\n          }\n        }\n      });\n    },\n  ]);\n\nexport default pagination;\n"],"names":["angular","module","run","e","put","service","itemsPerPage","currentPage","pageCount","getCurrentPage","getItemsPerPage","getPageCount","nextPage","prevPage","setItemsPerPage","i","setPage","setPageCount","itemCount","Math","ceil","setRange","left","right","inclusive","range","ascending","end","push","__range__","filter","PaginationService","data","_isEmpty","offset","start","slice","controller","$scope","showPagination","_isUndefined","itemsperpage","$watch","totalItems","_isFunction","changed"],"mappings":"4uBAYmBA,QAChBC,OAAO,cAAe,IACtBC,IAAI,CACH,iBACA,SAAAC,UACEA,EAAEC,IACA,6BACA,ucAGLC,QAAQ,oBAAqB,eACxBC,aAAe,GACfC,YAAc,EACdC,UAAY,QACT,CACLC,iCACSF,aAGTG,kCACSJ,cAGTK,+BACSH,WAGTI,2BACML,YAAcC,WAChBD,cAEKA,aAGTM,2BACoB,EAAdN,aACFA,cAEKA,aAGTO,yBAAgBC,UACNT,aAAeS,GAGzBC,iBAAQD,UACER,YAAcQ,GAGxBE,sBAAaC,kBACHV,UAAYW,KAAKC,KAAKF,UAAYZ,cAAgB,GAG5De,2BA/DN,SAAmBC,KAAMC,MAAOC,mBAC1BC,MAAQ,GACRC,UAAYJ,KAAOC,MACnBI,IAAOH,UAAoBE,UAAYH,MAAQ,EAAIA,MAAQ,EAAxCA,MACdR,EAAIO,KAAMI,UAAYX,EAAIY,IAAUA,IAAJZ,EAASW,UAAYX,IAAMA,IAClEU,MAAMG,KAAKb,UAENU,MAyDYI,CAAU,EAAGrB,WAAW,OAK1CsB,OACC,sBACA,SAAAC,0BACE,SAASC,SACHC,SAAUD,aACLA,SAGHE,OAASH,kBAAkBrB,kBAG3ByB,MAFUJ,kBAAkBtB,iBAEVyB,OAClBP,IAAMQ,MAAQD,cACbF,KAAKI,MAAMD,MAAOR,QAG9BU,WAAW,iBAAkB,CAC5B,SACA,oBACA,SAASC,OAAQP,0BACfO,OAAOC,gBAAiB,EAEnBC,aAAcF,OAAOG,eAAmBH,OAAOG,cAAgB,GAClEV,kBAAkBjB,gBAAgBwB,OAAOG,cAGpCH,OAAOI,OAAO,aAAc,SAASC,gBACrCH,aAAcG,cACjBZ,kBAAkBd,aAAa0B,YAC/BL,OAAOC,eAAoD,EAAnCR,kBAAkBpB,eAEtCiC,YAAaN,OAAOO,iBACfP,OAAOO,QAAQd,kBAAkBtB,iBAAkBsB,kBAAkBpB"}